import{_ as s,o as a,c as n,a as l}from"./app.6ff7423e.js";const d=JSON.parse('{"title":"SQL 基础","description":"","frontmatter":{},"headers":[{"level":2,"title":"DDL 语句","slug":"ddl-语句","link":"#ddl-语句","children":[{"level":3,"title":"创建表","slug":"创建表","link":"#创建表","children":[]},{"level":3,"title":"删除表","slug":"删除表","link":"#删除表","children":[]},{"level":3,"title":"修改表","slug":"修改表","link":"#修改表","children":[]},{"level":3,"title":"表约束","slug":"表约束","link":"#表约束","children":[]}]},{"level":2,"title":"DML 语句","slug":"dml-语句","link":"#dml-语句","children":[{"level":3,"title":"插入语句","slug":"插入语句","link":"#插入语句","children":[]},{"level":3,"title":"修改语句","slug":"修改语句","link":"#修改语句","children":[]},{"level":3,"title":"删除语句","slug":"删除语句","link":"#删除语句","children":[]}]},{"level":2,"title":"DQL 语句","slug":"dql-语句","link":"#dql-语句","children":[{"level":3,"title":"完整语法","slug":"完整语法","link":"#完整语法","children":[]},{"level":3,"title":"简单查询","slug":"简单查询","link":"#简单查询","children":[]},{"level":3,"title":"别名查询","slug":"别名查询","link":"#别名查询","children":[]},{"level":3,"title":"去重查询","slug":"去重查询","link":"#去重查询","children":[]},{"level":3,"title":"条件查询","slug":"条件查询","link":"#条件查询","children":[]},{"level":3,"title":"分组查询","slug":"分组查询","link":"#分组查询","children":[]},{"level":3,"title":"分组过滤","slug":"分组过滤","link":"#分组过滤","children":[]},{"level":3,"title":"排序查询","slug":"排序查询","link":"#排序查询","children":[]},{"level":3,"title":"分页查询","slug":"分页查询","link":"#分页查询","children":[]},{"level":3,"title":"多表查询","slug":"多表查询","link":"#多表查询","children":[]},{"level":3,"title":"联合查询","slug":"联合查询","link":"#联合查询","children":[]},{"level":3,"title":"子查询","slug":"子查询","link":"#子查询","children":[]}]},{"level":2,"title":"DCL 语句","slug":"dcl-语句","link":"#dcl-语句","children":[{"level":3,"title":"创建表空间","slug":"创建表空间","link":"#创建表空间","children":[]},{"level":3,"title":"删除表空间","slug":"删除表空间","link":"#删除表空间","children":[]},{"level":3,"title":"创建用户","slug":"创建用户","link":"#创建用户","children":[]},{"level":3,"title":"授权用户","slug":"授权用户","link":"#授权用户","children":[]},{"level":3,"title":"取消授权","slug":"取消授权","link":"#取消授权","children":[]},{"level":3,"title":"修改密码","slug":"修改密码","link":"#修改密码","children":[]}]},{"level":2,"title":"TCL 语句","slug":"tcl-语句","link":"#tcl-语句","children":[{"level":3,"title":"事务的特性","slug":"事务的特性","link":"#事务的特性","children":[]},{"level":3,"title":"并发事务问题","slug":"并发事务问题","link":"#并发事务问题","children":[]},{"level":3,"title":"悲观锁与乐观锁","slug":"悲观锁与乐观锁","link":"#悲观锁与乐观锁","children":[]}]}],"relativePath":"md/db/oracle/sql.md","lastUpdated":1673077139000}'),p={name:"md/db/oracle/sql.md"},o=l(`<h1 id="sql-基础" tabindex="-1">SQL 基础 <a class="header-anchor" href="#sql-基础" aria-hidden="true">#</a></h1><h2 id="ddl-语句" tabindex="-1">DDL 语句 <a class="header-anchor" href="#ddl-语句" aria-hidden="true">#</a></h2><h3 id="创建表" tabindex="-1">创建表 <a class="header-anchor" href="#创建表" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> [or replace] </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名(</span></span>
<span class="line"><span style="color:#A6ACCD;">     列名 列的类型 [列的约束],</span></span>
<span class="line"><span style="color:#A6ACCD;">     列名 列的类型 [列的约束]  </span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 查询语句;</span></span>
<span class="line"></span></code></pre></div><h3 id="删除表" tabindex="-1">删除表 <a class="header-anchor" href="#删除表" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名;</span></span>
<span class="line"><span style="color:#F78C6C;">truncate</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名;</span></span>
<span class="line"></span></code></pre></div><h3 id="修改表" tabindex="-1">修改表 <a class="header-anchor" href="#修改表" aria-hidden="true">#</a></h3><h4 id="添加一列" tabindex="-1">添加一列 <a class="header-anchor" href="#添加一列" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> 列名 列的类型;</span></span>
<span class="line"></span></code></pre></div><h4 id="修改列名" tabindex="-1">修改列名 <a class="header-anchor" href="#修改列名" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 rename column 旧列名 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 新列名;</span></span>
<span class="line"></span></code></pre></div><h4 id="修改类型" tabindex="-1">修改类型 <a class="header-anchor" href="#修改类型" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> 列名 列的类型;</span></span>
<span class="line"></span></code></pre></div><h4 id="删除一列" tabindex="-1">删除一列 <a class="header-anchor" href="#删除一列" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> column 列名;</span></span>
<span class="line"></span></code></pre></div><h4 id="修改表名" tabindex="-1">修改表名 <a class="header-anchor" href="#修改表名" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">rename 旧表名 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 新表名;</span></span>
<span class="line"></span></code></pre></div><h3 id="表约束" tabindex="-1">表约束 <a class="header-anchor" href="#表约束" aria-hidden="true">#</a></h3><h4 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名(</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名 列的类型 </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">--主键约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名 列的类型 </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">--非空约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名 列的类型 </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">--唯一约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名 列的类型 </span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;">(列名 </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (检查列表)), </span><span style="color:#676E95;">--检查约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> 约束名 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;">(字段名) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> 主表(被引用列) </span><span style="color:#676E95;">--外键约束</span></span>
<span class="line"><span style="color:#A6ACCD;">) ;</span></span>
<span class="line"></span></code></pre></div><h4 id="演示" tabindex="-1">演示 <a class="header-anchor" href="#演示" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--商品分类表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> category(</span></span>
<span class="line"><span style="color:#A6ACCD;">    cid </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    cname </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--商品详情表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product(</span></span>
<span class="line"><span style="color:#A6ACCD;">    pid </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;">,</span><span style="color:#676E95;">--主键约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    pname </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">,</span><span style="color:#676E95;">--非空约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    pimg </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">,</span><span style="color:#676E95;">--唯一约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    pflag </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;">(pflag </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">上架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">下架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)),</span><span style="color:#676E95;">--检查约束</span></span>
<span class="line"><span style="color:#A6ACCD;">    cid </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> FK_CATEGORY_ID </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;">(cid) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> category(cid)</span><span style="color:#676E95;">--外键约束</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre></div><h4 id="约束修改" tabindex="-1">约束修改 <a class="header-anchor" href="#约束修改" aria-hidden="true">#</a></h4><ul><li><p>主键约束</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">添加</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> PK_PRODUCT_PID </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;">(pid);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> PK_PRODUCT_PID;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>非空约束</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">添加</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> pname </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> pname </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>唯一约束</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">添加</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> UK_PRODUCT_PIMG </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">(pimg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> UK_PRODUCT_PIMG;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">(pimg);</span></span>
<span class="line"></span></code></pre></div></li><li><p>检查约束</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">添加</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> CK_PRODUCT_PFLAG </span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;">(pflag </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">上架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">下架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> CK_PRODUCT_PFLAG;</span></span>
<span class="line"></span></code></pre></div></li><li><p>外键约束</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">添加</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> FK_PRODUCT_ID </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;">(cid) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> category(cid);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> product </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> FK_PRODUCT_ID;</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="dml-语句" tabindex="-1">DML 语句 <a class="header-anchor" href="#dml-语句" aria-hidden="true">#</a></h2><h3 id="插入语句" tabindex="-1">插入语句 <a class="header-anchor" href="#插入语句" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">格式：</span><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> 表名(列名1,列名2,...) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(值1,值2,...);</span></span>
<span class="line"><span style="color:#A6ACCD;">演示：</span><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> category(cid,cname) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">电视</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">注意：</span><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="修改语句" tabindex="-1">修改语句 <a class="header-anchor" href="#修改语句" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">格式：</span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> 列名1</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值1,列名2</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值2,... </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"><span style="color:#A6ACCD;">演示：</span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> category </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> cname</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">汽车</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> cid </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">注意：</span><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="删除语句" tabindex="-1">删除语句 <a class="header-anchor" href="#删除语句" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">格式：</span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"><span style="color:#A6ACCD;">演示：</span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> category </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> cid </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">注意：</span><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="dql-语句" tabindex="-1">DQL 语句 <a class="header-anchor" href="#dql-语句" aria-hidden="true">#</a></h2><h3 id="完整语法" tabindex="-1">完整语法 <a class="header-anchor" href="#完整语法" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> [TOP|DISTINCT] [选择列表]|[*]</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 数据源</span></span>
<span class="line"><span style="color:#A6ACCD;">[where 查询条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">[group by 分组条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">[having 过滤条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">[order by 排序条件 asc|desc nulls first|last];</span></span>
<span class="line"></span></code></pre></div><p>执行顺序：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">（</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">）</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> [（5-3）TOP|（5-2）DISTINCT] （</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">）[选择列表]|[*]</span></span>
<span class="line"><span style="color:#A6ACCD;">（</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">）</span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 数据源</span></span>
<span class="line"><span style="color:#A6ACCD;">（</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">）[where 查询条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">（</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">）[group by 分组条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">（</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">）[having 过滤条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">（</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">）[order by asc|desc nulls first|last];</span></span>
<span class="line"></span></code></pre></div><h3 id="简单查询" tabindex="-1">简单查询 <a class="header-anchor" href="#简单查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--查询所有员工的信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span></code></pre></div><h3 id="别名查询" tabindex="-1">别名查询 <a class="header-anchor" href="#别名查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--查询所有员工的姓名</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.ename </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp e;</span></span>
<span class="line"></span></code></pre></div><h3 id="去重查询" tabindex="-1">去重查询 <a class="header-anchor" href="#去重查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--查询所有部门的编号</span></span>
<span class="line"><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> e.deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp e;</span></span>
<span class="line"></span></code></pre></div><h3 id="条件查询" tabindex="-1">条件查询 <a class="header-anchor" href="#条件查询" aria-hidden="true">#</a></h3><ol><li>条件运算符：&gt;、&gt;=、&lt;、&lt;=、=、&lt;=&gt;、!=、&lt;&gt;</li><li>逻辑运算符：and、or、not</li><li>模糊运算符： <ul><li>like：%任意多个字符、_任意单个字符、如果有特殊字符，需要使用escape转义</li><li>between and</li><li>not between and</li><li>in</li><li>is null</li><li>is not null</li></ul></li></ol><h3 id="分组查询" tabindex="-1">分组查询 <a class="header-anchor" href="#分组查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--统计每个部门有多少个人</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">部门</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">人数</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno;</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>此处查询的列只能是group by 子句中出现的列或是聚合函数的值！</p></div><h3 id="分组过滤" tabindex="-1">分组过滤 <a class="header-anchor" href="#分组过滤" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--统计部门人数&gt;5人的部门的编号</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">部门</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">人数</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp</span></span>
<span class="line"><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno</span></span>
<span class="line"><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="排序查询" tabindex="-1">排序查询 <a class="header-anchor" href="#排序查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--按照员工主管编号由高到低进行排序，NULL值放到最后边</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> mgr </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> nulls </span><span style="color:#F78C6C;">last</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="分页查询" tabindex="-1">分页查询 <a class="header-anchor" href="#分页查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--查询前10条员工的信息</span></span>
<span class="line"><span style="color:#676E95;">--注意：Oracle中不支持limit，需要在原始表加上一列：行号，然后使用子查询来实现分页</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> rownum hanghao,e.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp e) t</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> t.hanghao </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> t.hanghao </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="多表查询" tabindex="-1">多表查询 <a class="header-anchor" href="#多表查询" aria-hidden="true">#</a></h3><ul><li><p><strong>内连接</strong></p><ul><li><p>隐式内连接：select * from emp e1, dept d1 where e1.deptno = d1.deptno;</p></li><li><p>显示内连接：select * from emp e1 inner join dept d1 on e1.deptno = d1.deptno;</p></li></ul></li><li><p><strong>外连接</strong></p><ul><li>左外连接 <ul><li>隐式左外连接：select * from emp e1,dept d1 where e1.deptno = d1.deptno(+);</li><li>显示左外连接：select * from emp e1 left outer join dept d1 on e1.deptno = d1.deptno;</li></ul></li><li>右外连接 <ul><li>隐式右外连接：select * from emp e1,dept d1 where e1.deptno(+) = d1.deptno;</li><li>显示右外连接：select * from emp e1 right outer join dept d1 on e1.deptno = d1.deptno;</li></ul></li><li>全外连接：select * from emp e1 full outer join dept d1 on e1.deptno = d1.deptno;</li></ul></li><li><p>交叉连接</p><ul><li>隐式交叉连接：select * from emp, dept;</li><li>显示交叉连接：select * from emp e1 cross join dept d1;</li></ul></li></ul><h3 id="联合查询" tabindex="-1">联合查询 <a class="header-anchor" href="#联合查询" aria-hidden="true">#</a></h3><ul><li><p>并集运算：将两个查询结果进行合并</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">/*</span></span>
<span class="line"><span style="color:#676E95;">	union 		: 它会去除重复的，并且排序</span></span>
<span class="line"><span style="color:#676E95;">	union all 	: 不会去除重复的，不会排序</span></span>
<span class="line"><span style="color:#676E95;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--工资大于1500或者20号部门下的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1500</span></span>
<span class="line"><span style="color:#F78C6C;">union</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--工资大于1500或者20号部门下的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1500</span></span>
<span class="line"><span style="color:#F78C6C;">union all</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>交集运算：找两个查询结果的交集</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--工资大于1500并且20号部门下的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1500</span></span>
<span class="line"><span style="color:#F78C6C;">intersect</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>差集运算：找两个查询结果的差集</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--1981年入职员工(不包括总裁和经理)</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> to_char(hiredate,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yyyy</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1981</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">minus</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PRESIDENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><ol><li>列的类型要一致</li><li>列的顺序要一致</li><li>列的数量要一致，如果不够，可以使用null填充</li></ol></div><h3 id="子查询" tabindex="-1">子查询 <a class="header-anchor" href="#子查询" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--查询所有经理的信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> empno </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> mgr </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> mgr </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查询不是经理的信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> empno </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> mgr </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> mgr </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查询出比10号部门任意一个员工薪资高的员工信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> any (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查询出比10号部门任意一个员工薪资高的员工信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> some (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查询出比20号部门所有员工薪资高的员工信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> all (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查询有员工的部门的信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept d1 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">exists</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp e1 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> e1.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d1.deptno);</span></span>
<span class="line"></span></code></pre></div><h2 id="dcl-语句" tabindex="-1">DCL 语句 <a class="header-anchor" href="#dcl-语句" aria-hidden="true">#</a></h2><h3 id="创建表空间" tabindex="-1">创建表空间 <a class="header-anchor" href="#创建表空间" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> tablespace 表空间的名称</span></span>
<span class="line"><span style="color:#A6ACCD;">datafile </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">文件的路径</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">size 初始化大小</span></span>
<span class="line"><span style="color:#A6ACCD;">autoextend </span><span style="color:#F78C6C;">on</span></span>
<span class="line"><span style="color:#F78C6C;">next</span><span style="color:#A6ACCD;"> 每次扩展的大小;</span></span>
<span class="line"></span></code></pre></div><p>示例：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> tablespace mytest</span></span>
<span class="line"><span style="color:#A6ACCD;">datafile </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">d:/mytest.dbf</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">size 100m</span></span>
<span class="line"><span style="color:#A6ACCD;">autoextend </span><span style="color:#F78C6C;">on</span></span>
<span class="line"><span style="color:#F78C6C;">next</span><span style="color:#A6ACCD;"> 10m;</span></span>
<span class="line"></span></code></pre></div><h3 id="删除表空间" tabindex="-1">删除表空间 <a class="header-anchor" href="#删除表空间" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> tablespace 表空间的名称;</span></span>
<span class="line"></span></code></pre></div><p>示例：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> tablespace mytest;</span></span>
<span class="line"></span></code></pre></div><h3 id="创建用户" tabindex="-1">创建用户 <a class="header-anchor" href="#创建用户" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> user 用户名</span></span>
<span class="line"><span style="color:#A6ACCD;">identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> 密码</span></span>
<span class="line"><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> tablespace 表空间的名称;</span></span>
<span class="line"></span></code></pre></div><h3 id="授权用户" tabindex="-1">授权用户 <a class="header-anchor" href="#授权用户" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> 系统权限列表 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 用户名;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> 实体权限列表 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 用户名;</span></span>
<span class="line"></span></code></pre></div><p>系统权限分类：（系统权限只能由DBA用户授出）</p><ul><li>DBA：拥有全部特权，是系统最高权限，只有DBA才可以创建数据库结构。</li><li>RESOURCE：拥有Resource权限的用户只可以创建实体，不可以创建数据库结构。</li><li>CONNECT：拥有Connect权限的用户只可以登录Oracle，不可以创建实体，不可以创建数据库结构。</li></ul><p>实体权限分类：select、update、insert、alter、index、delete、all</p><p>示例：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">RESOURCE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">RESOURCE</span><span style="color:#A6ACCD;">,DBA </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> DBA </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> all </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"></span></code></pre></div><h3 id="取消授权" tabindex="-1">取消授权 <a class="header-anchor" href="#取消授权" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> 系统权限列表 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 用户名;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> 实体权限列表 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 用户名;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>系统权限只能由DBA<strong>用户回收</strong></p></blockquote><p>示例：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">RESOURCE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">RESOURCE</span><span style="color:#A6ACCD;">,DBA </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> DBA </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"><span style="color:#A6ACCD;">或者</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> all </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> zhangsan;</span></span>
<span class="line"></span></code></pre></div><h3 id="修改密码" tabindex="-1">修改密码 <a class="header-anchor" href="#修改密码" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> user 用户名 identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">密码</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="tcl-语句" tabindex="-1">TCL 语句 <a class="header-anchor" href="#tcl-语句" aria-hidden="true">#</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、开启事务</span></span>
<span class="line"><span style="color:#A6ACCD;">Oracle 11g中事务是隐式自动开始的，它不需要用户显示的执行开始事务语句</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">、编写一组逻辑sql语句</span></span>
<span class="line"><span style="color:#A6ACCD;">注意：sql语句支持的是insert、</span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;">、</span><span style="color:#F78C6C;">delete</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">【设置回滚点】</span></span>
<span class="line"><span style="color:#A6ACCD;">savepoint 回滚点名;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">、结束事务</span></span>
<span class="line"><span style="color:#A6ACCD;">提交：</span><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">回滚：</span><span style="color:#F78C6C;">rollback</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">回滚到指定的地方： </span><span style="color:#F78C6C;">rollback</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 回滚点名;</span></span>
<span class="line"></span></code></pre></div><h3 id="事务的特性" tabindex="-1">事务的特性 <a class="header-anchor" href="#事务的特性" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:center;">事务特性</th><th style="text-align:center;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">原子性（Atomicity）</td><td style="text-align:center;">事务是不可分割的最小操作单元，要么全部成功，要么全部失败</td></tr><tr><td style="text-align:center;">一致性（Consistency）</td><td style="text-align:center;">事务完成时，必须使所有的数据都保持一致状态</td></tr><tr><td style="text-align:center;">隔离性（Isolation）</td><td style="text-align:center;">数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</td></tr><tr><td style="text-align:center;">持久性（Durability）</td><td style="text-align:center;">事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</td></tr></tbody></table><h3 id="并发事务问题" tabindex="-1">并发事务问题 <a class="header-anchor" href="#并发事务问题" aria-hidden="true">#</a></h3><ul><li><p>脏读：一个事务读到另外一个事务还没有提交的数据。</p></li><li><p>不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</p></li><li><p>幻读：一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了”幻影”。</p></li></ul><h3 id="悲观锁与乐观锁" tabindex="-1">悲观锁与乐观锁 <a class="header-anchor" href="#悲观锁与乐观锁" aria-hidden="true">#</a></h3><ul><li>悲观锁：认为两个事务更新操作一定会发生丢失更新 <ul><li>通过在语句后边添加for update来实现行级上锁，所以又称为“行级锁”，例如：<code>select * from t_account t wheret.id=&#39;1&#39; for update;</code></li></ul></li><li>乐观锁：认为事务不一定会产生丢失更新，让事务进行并发修改，不对事务进行锁定 <ul><li>由程序员自己解决，可以通过给数据表添加自增的version字段或时间戳timestamp，进行数据修改时，数据库会检测version字段或者时间戳是否与原来的一致，若不一致，抛出异常或者重新查询</li></ul></li></ul>`,93),e=[o];function c(t,C,r,y,A,i){return a(),n("div",null,e)}const F=s(p,[["render",c]]);export{d as __pageData,F as default};
