import{_ as s,o as a,c as n,a as l}from"./app.8872fa03.js";const h=JSON.parse('{"title":"高级部分","description":"","frontmatter":{},"headers":[{"level":2,"title":"序列","slug":"序列","link":"#序列","children":[]},{"level":2,"title":"索引","slug":"索引","link":"#索引","children":[{"level":3,"title":"创建索引","slug":"创建索引","link":"#创建索引","children":[]},{"level":3,"title":"修改索引","slug":"修改索引","link":"#修改索引","children":[]},{"level":3,"title":"删除索引","slug":"删除索引","link":"#删除索引","children":[]}]},{"level":2,"title":"视图","slug":"视图","link":"#视图","children":[{"level":3,"title":"创建视图","slug":"创建视图","link":"#创建视图","children":[]},{"level":3,"title":"修改视图","slug":"修改视图","link":"#修改视图","children":[]},{"level":3,"title":"删除视图","slug":"删除视图","link":"#删除视图","children":[]}]},{"level":2,"title":"同义词","slug":"同义词","link":"#同义词","children":[{"level":3,"title":"创建同义词","slug":"创建同义词","link":"#创建同义词","children":[]},{"level":3,"title":"修改同义词","slug":"修改同义词","link":"#修改同义词","children":[]},{"level":3,"title":"删除同义词","slug":"删除同义词","link":"#删除同义词","children":[]}]},{"level":2,"title":"触发器","slug":"触发器","link":"#触发器","children":[{"level":3,"title":"分类","slug":"分类","link":"#分类","children":[]},{"level":3,"title":"创建触发器","slug":"创建触发器","link":"#创建触发器","children":[]},{"level":3,"title":"修改触发器","slug":"修改触发器","link":"#修改触发器","children":[]},{"level":3,"title":"删除触发器","slug":"删除触发器","link":"#删除触发器","children":[]}]}],"relativePath":"md/db/oracle/others.md","lastUpdated":1673079902000}'),e={name:"md/db/oracle/others.md"},p=l(`<h1 id="高级部分" tabindex="-1">高级部分 <a class="header-anchor" href="#高级部分" aria-hidden="true">#</a></h1><h2 id="序列" tabindex="-1">序列 <a class="header-anchor" href="#序列" aria-hidden="true">#</a></h2><p>序列是 Oracle 数据库中特有的，使用序列可以生成类似于 auto_increment 这种 ID 自动增长 1,2,3,4,5… 的效果，可以用它来生成主键</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">sequence</span><span style="color:#A6ACCD;"> 序列名称</span></span>
<span class="line"><span style="color:#F78C6C;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">with</span><span style="color:#A6ACCD;"> 从几开始</span></span>
<span class="line"><span style="color:#A6ACCD;">increment </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> 每次增长多少</span></span>
<span class="line"><span style="color:#A6ACCD;">[maxvalue 最大值] | nomaxvalue</span></span>
<span class="line"><span style="color:#A6ACCD;">[minvalue 最小值] | nominvalue</span></span>
<span class="line"><span style="color:#A6ACCD;">cycle | nocycle </span><span style="color:#676E95;">--是否自动循环</span></span>
<span class="line"><span style="color:#A6ACCD;">[cache 缓存数量] | nocache;</span></span>
<span class="line"></span></code></pre></div><p><strong>使用：</strong></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">使用方式：先 </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.nextval</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> 后 </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.currval</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- 反之会报错</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> seq_name.nextval </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> seq_name.currval </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span></code></pre></div><p><strong>示例：创建 “学生信息表”，并实现主键 “学号” 自增</strong></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">-- 1.创建 &#39;学生信息表&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> scott.stu_info (</span></span>
<span class="line"><span style="color:#A6ACCD;">  sno   </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> pk_stu_info_sno </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  sname </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 2.创建序列（上述已创建 seq_name）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 3.实现序列自增</span></span>
<span class="line"><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> scott.stu_info(sno, sname) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(scott.seq_name.nextval, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">小游子</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> scott.stu_info(sno, sname) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(scott.seq_name.nextval, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">瑶瑶</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> scott.stu_info(sno, sname) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(scott.seq_name.nextval, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">优优</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> scott.seq_name.currval 当前序列值 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual; </span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> scott.stu_info;</span></span>
<span class="line"></span></code></pre></div><h2 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-hidden="true">#</a></h2><p>索引相当于是一本书的目录，能够提高我们的查询效率</p><h3 id="创建索引" tabindex="-1">创建索引 <a class="header-anchor" href="#创建索引" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> [UNIQUE]|[BITMAP] </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> 索引名 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 表名(列名1,列名2,...);</span></span>
<span class="line"></span></code></pre></div><h3 id="修改索引" tabindex="-1">修改索引 <a class="header-anchor" href="#修改索引" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">--重命名索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> 索引名称 rename </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 新的名称;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--合并索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> 索引名称 </span><span style="color:#82AAFF;">coalesce</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--重建索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> 索引名称 </span><span style="color:#F78C6C;">rebuild</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--修改某列</span></span>
<span class="line"><span style="color:#A6ACCD;">先删除，在创建</span></span>
<span class="line"></span></code></pre></div><h3 id="删除索引" tabindex="-1">删除索引 <a class="header-anchor" href="#删除索引" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> 索引名称;</span></span>
<span class="line"></span></code></pre></div><h2 id="视图" tabindex="-1">视图 <a class="header-anchor" href="#视图" aria-hidden="true">#</a></h2><p>视图是对查询结果的一个封装，视图里面所有的数据，都是来自于它查询的那张表，视图本身不存储任何数据，但是可以修改原数据，但是不建议这样使用。</p><h3 id="创建视图" tabindex="-1">创建视图 <a class="header-anchor" href="#创建视图" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view 视图名称</span></span>
<span class="line"><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 查询语句</span></span>
<span class="line"><span style="color:#A6ACCD;">[with read only];</span></span>
<span class="line"></span></code></pre></div><h3 id="修改视图" tabindex="-1">修改视图 <a class="header-anchor" href="#修改视图" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;"> view 视图名称</span></span>
<span class="line"><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 查询语句</span></span>
<span class="line"><span style="color:#A6ACCD;">[with read only];</span></span>
<span class="line"></span></code></pre></div><h3 id="删除视图" tabindex="-1">删除视图 <a class="header-anchor" href="#删除视图" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> view 视图名称;</span></span>
<span class="line"></span></code></pre></div><h2 id="同义词" tabindex="-1">同义词 <a class="header-anchor" href="#同义词" aria-hidden="true">#</a></h2><p>同义词就是别名的意思和视图的功能类似，就是一种映射关系</p><h3 id="创建同义词" tabindex="-1">创建同义词 <a class="header-anchor" href="#创建同义词" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> [public] </span><span style="color:#F78C6C;">synonym</span><span style="color:#A6ACCD;"> 同义词名称 for 对象的名称;</span></span>
<span class="line"></span></code></pre></div><h3 id="修改同义词" tabindex="-1">修改同义词 <a class="header-anchor" href="#修改同义词" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;"> [public] </span><span style="color:#F78C6C;">synonym</span><span style="color:#A6ACCD;"> 同义词名称 for 对象的名称;</span></span>
<span class="line"></span></code></pre></div><h3 id="删除同义词" tabindex="-1">删除同义词 <a class="header-anchor" href="#删除同义词" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> [public] </span><span style="color:#F78C6C;">synonym</span><span style="color:#A6ACCD;"> 同义词名称;</span></span>
<span class="line"></span></code></pre></div><h2 id="触发器" tabindex="-1">触发器 <a class="header-anchor" href="#触发器" aria-hidden="true">#</a></h2><p>当用户执行了 insert | update | delete 这些操作之后，可以触发一系列其它的动作、业务逻辑，使用触发器可以协助应用在数据库端确保数据的完整性、日志记录 、数据校验等操作。使用别名 OLD 和 NEW 来引用触发器中发生变化的记录内容，这与其他的数据库是相似的。现在Oracle触发器不仅支持行级触发，还支持语句级触发。</p><h3 id="分类" tabindex="-1">分类 <a class="header-anchor" href="#分类" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:center;">触发器类型</th><th style="text-align:center;">NEW 和 OLD的使用</th></tr></thead><tbody><tr><td style="text-align:center;">INSERT 型触发器</td><td style="text-align:center;">NEW 表示将要或者已经新增的数据</td></tr><tr><td style="text-align:center;">UPDATE 型触发器</td><td style="text-align:center;">OLD 表示修改之前的数据 , NEW 表示将要或已经修改后的数据</td></tr><tr><td style="text-align:center;">DELETE 型触发器</td><td style="text-align:center;">OLD 表示将要或者已经删除的数据</td></tr></tbody></table><h3 id="创建触发器" tabindex="-1">创建触发器 <a class="header-anchor" href="#创建触发器" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> trigger 触发器名称</span></span>
<span class="line"><span style="color:#F78C6C;">before</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">after</span></span>
<span class="line"><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 表名称</span></span>
<span class="line"><span style="color:#A6ACCD;">[for each row]</span><span style="color:#676E95;">--行级触发器</span></span>
<span class="line"><span style="color:#F78C6C;">declare</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">--声明部分</span></span>
<span class="line"><span style="color:#F78C6C;">begin</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">--业务逻辑 </span></span>
<span class="line"><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="修改触发器" tabindex="-1">修改触发器 <a class="header-anchor" href="#修改触发器" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> [or replace] trigger 触发器名称</span></span>
<span class="line"><span style="color:#F78C6C;">before</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">after</span></span>
<span class="line"><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 表名称</span></span>
<span class="line"><span style="color:#A6ACCD;">[for each row]</span><span style="color:#676E95;">--行级触发器</span></span>
<span class="line"><span style="color:#F78C6C;">declare</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">--声明部分</span></span>
<span class="line"><span style="color:#F78C6C;">begin</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">--业务逻辑 </span></span>
<span class="line"><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="删除触发器" tabindex="-1">删除触发器 <a class="header-anchor" href="#删除触发器" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> trigger 触发器名称;</span></span>
<span class="line"></span></code></pre></div>`,42),o=[p];function t(c,r,C,i,y,d){return a(),n("div",null,o)}const D=s(e,[["render",t]]);export{h as __pageData,D as default};
